(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["tn_components-chat-chat"],{"0a1b":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("v-uni-view",{staticClass:"content",on:{touchstart:function(t){arguments[0]=t=e.$handleEvent(t),e.hideDrawer.apply(void 0,arguments)}}},[n("v-uni-scroll-view",{staticClass:"msg-list",class:e.popupLayerClass,attrs:{"scroll-y":"true","scroll-with-animation":e.scrollAnimation,"scroll-top":e.scrollTop,"scroll-into-view":e.scrollToView,"upper-threshold":"50"},on:{scrolltoupper:function(t){arguments[0]=t=e.$handleEvent(t),e.loadHistory.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"loading"},[n("v-uni-view",{staticClass:"spinner"},[n("v-uni-view",{staticClass:"rect1"}),n("v-uni-view",{staticClass:"rect2"}),n("v-uni-view",{staticClass:"rect3"}),n("v-uni-view",{staticClass:"rect4"}),n("v-uni-view",{staticClass:"rect5"})],1)],1),e._l(e.msgList,(function(t,i){return n("v-uni-view",{key:i,staticClass:"row",attrs:{id:"msg"+t.msg.id}},["system"==t.type?[n("v-uni-view",{staticClass:"system"},["text"==t.msg.type?n("v-uni-view",{staticClass:"text"},[e._v(e._s(t.msg.content.text))]):e._e(),"redEnvelope"==t.msg.type?n("v-uni-view",{staticClass:"red-envelope"},[n("v-uni-image",{attrs:{src:"/static/chat/red-envelope-chat.png"}}),e._v(e._s(t.msg.content.text))],1):e._e()],1)]:e._e(),"user"==t.type?[t.msg.userinfo.uid==e.myuid?n("v-uni-view",{staticClass:"my"},[n("v-uni-view",{staticClass:"left"},["text"==t.msg.type?n("v-uni-view",{staticClass:"bubble"},[n("v-uni-rich-text",{attrs:{nodes:t.msg.content.text}})],1):e._e(),"voice"==t.msg.type?n("v-uni-view",{staticClass:"bubble voice",class:e.playMsgid==t.msg.id?"play":"",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.playVoice(t.msg)}}},[n("v-uni-view",{staticClass:"length"},[e._v(e._s(t.msg.content.length))]),n("v-uni-view",{staticClass:"icon my-voice"})],1):e._e(),"img"==t.msg.type?n("v-uni-view",{staticClass:"bubble img",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.showPic(t.msg)}}},[n("v-uni-image",{style:{width:t.msg.content.w+"px",height:t.msg.content.h+"px"},attrs:{src:t.msg.content.url}})],1):e._e(),"redEnvelope"==t.msg.type?n("v-uni-view",{staticClass:"bubble red-envelope",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.openRedEnvelope(t.msg,i)}}},[n("v-uni-image",{attrs:{src:"/static/chat/red-envelope.png"}}),n("v-uni-view",{staticClass:"tis"}),n("v-uni-view",{staticClass:"blessing"},[e._v(e._s(t.msg.content.blessing))])],1):e._e()],1),n("v-uni-view",{staticClass:"right"},[n("v-uni-image",{attrs:{src:t.msg.userinfo.face}})],1)],1):e._e(),t.msg.userinfo.uid!=e.myuid?n("v-uni-view",{staticClass:"other"},[n("v-uni-view",{staticClass:"left"},[n("v-uni-image",{attrs:{src:t.msg.userinfo.face}})],1),n("v-uni-view",{staticClass:"right"},[n("v-uni-view",{staticClass:"username"},[n("v-uni-view",{staticClass:"name"},[e._v(e._s(t.msg.userinfo.username))]),n("v-uni-view",{staticClass:"time"},[e._v(e._s(t.msg.time))])],1),"text"==t.msg.type?n("v-uni-view",{staticClass:"bubble"},[n("v-uni-rich-text",{attrs:{nodes:t.msg.content.text}})],1):e._e(),"voice"==t.msg.type?n("v-uni-view",{staticClass:"bubble voice",class:e.playMsgid==t.msg.id?"play":"",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.playVoice(t.msg)}}},[n("v-uni-view",{staticClass:"icon other-voice"}),n("v-uni-view",{staticClass:"length"},[e._v(e._s(t.msg.content.length))])],1):e._e(),"img"==t.msg.type?n("v-uni-view",{staticClass:"bubble img",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.showPic(t.msg)}}},[n("v-uni-image",{style:{width:t.msg.content.w+"px",height:t.msg.content.h+"px"},attrs:{src:t.msg.content.url}})],1):e._e(),"redEnvelope"==t.msg.type?n("v-uni-view",{staticClass:"bubble red-envelope",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.openRedEnvelope(t.msg,i)}}},[n("v-uni-image",{attrs:{src:"/static/chat/red-envelope.png"}}),n("v-uni-view",{staticClass:"tis"}),n("v-uni-view",{staticClass:"blessing"},[e._v(e._s(t.msg.content.blessing))])],1):e._e()],1)],1):e._e()]:e._e()],2)}))],2)],1),n("v-uni-view",{staticClass:"popup-layer",class:e.popupLayerClass,on:{touchmove:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=e.$handleEvent(t),e.discard.apply(void 0,arguments)}}},[n("v-uni-swiper",{staticClass:"emoji-swiper",class:{hidden:e.hideEmoji},attrs:{"indicator-dots":"true",duration:"150"}},e._l(e.emojiList,(function(t,i){return n("v-uni-swiper-item",{key:i},e._l(t,(function(t,i){return n("v-uni-view",{key:i,on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.addEmoji(t)}}},[n("v-uni-image",{attrs:{mode:"widthFix",src:"https://zhoukaiwen.com/img/icon/emojj1/"+t.url}})],1)})),1)})),1),n("v-uni-view",{staticClass:"more-layer",class:{hidden:e.hideMore}},[n("v-uni-view",{staticClass:"list"},[n("v-uni-view",{staticClass:"box",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseImage.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"icon tupian2"})],1),n("v-uni-view",{staticClass:"box",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.camera.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"icon paizhao"})],1),n("v-uni-view",{staticClass:"box",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handRedEnvelopes.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"icon hongbao"})],1)],1)],1)],1),n("v-uni-view",{staticClass:"input-box cu-bar tabbar",class:e.popupLayerClass,on:{touchmove:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=e.$handleEvent(t),e.discard.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"more",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.showMore.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"icon add"})],1),n("v-uni-view",{staticClass:"textbox"},[n("v-uni-view",{staticClass:"voice-mode",class:[e.isVoice?"":"hidden",e.recording?"recording":""],on:{touchstart:function(t){arguments[0]=t=e.$handleEvent(t),e.voiceBegin.apply(void 0,arguments)},touchmove:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=e.$handleEvent(t),e.voiceIng.apply(void 0,arguments)},touchend:function(t){arguments[0]=t=e.$handleEvent(t),e.voiceEnd.apply(void 0,arguments)},touchcancel:function(t){arguments[0]=t=e.$handleEvent(t),e.voiceCancel.apply(void 0,arguments)}}},[e._v(e._s(e.voiceTis))]),n("v-uni-view",{staticClass:"text-mode",class:e.isVoice?"hidden":""},[n("v-uni-view",{staticClass:"box"},[n("v-uni-textarea",{attrs:{"auto-height":"true"},on:{focus:function(t){arguments[0]=t=e.$handleEvent(t),e.textareaFocus.apply(void 0,arguments)}},model:{value:e.textMsg,callback:function(t){e.textMsg=t},expression:"textMsg"}})],1),n("v-uni-view",{staticClass:"em",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseEmoji.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"icon biaoqing"})],1)],1)],1),n("v-uni-view",{staticClass:"send",class:e.isVoice?"hidden":"",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendText.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"btn"},[e._v("发送")])],1)],1),n("v-uni-view",{staticClass:"record",class:e.recording?"":"hidden"},[n("v-uni-view",{staticClass:"ing",class:e.willStop?"hidden":""},[n("v-uni-view",{staticClass:"icon luyin2"})],1),n("v-uni-view",{staticClass:"cancel",class:e.willStop?"":"hidden"},[n("v-uni-view",{staticClass:"icon chehui"})],1),n("v-uni-view",{staticClass:"tis",class:e.willStop?"change":""},[e._v(e._s(e.recordTis))])],1),n("v-uni-view",{staticClass:"windows",class:e.windowsState},[n("v-uni-view",{staticClass:"mask",on:{touchmove:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=e.$handleEvent(t),e.discard.apply(void 0,arguments)},click:function(t){arguments[0]=t=e.$handleEvent(t),e.closeRedEnvelope.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"layer",on:{touchmove:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=e.$handleEvent(t),e.discard.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"open-redenvelope"},[n("v-uni-view",{staticClass:"top"},[n("v-uni-view",{staticClass:"close-btn"},[n("v-uni-view",{staticClass:"icon close",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.closeRedEnvelope.apply(void 0,arguments)}}})],1),n("v-uni-image",{attrs:{src:"https://zhoukaiwen.com/img/qdpz/face/face_1.jpg"}})],1),n("v-uni-view",{staticClass:"from"},[e._v("来自"+e._s(e.redenvelopeData.from))]),n("v-uni-view",{staticClass:"blessing"},[e._v(e._s(e.redenvelopeData.blessing))]),n("v-uni-view",{staticClass:"money"},[e._v(e._s(e.redenvelopeData.money))]),n("v-uni-view",{staticClass:"showDetails",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toDetails(e.redenvelopeData.rid)}}},[e._v("查看领取详情"),n("v-uni-view",{staticClass:"icon to"})],1)],1)],1)],1)],1)},s=[]},3227:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-page-body[data-v-b1eec9d8]{background-color:#e5e5e5}body.?%PAGE?%[data-v-b1eec9d8]{background-color:#e5e5e5}@font-face{font-family:HMfont-home;src:url("data:application/x-font-woff2;charset=utf-8;base64,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") format("woff2")}.icon[data-v-b1eec9d8]{font-family:HMfont-home!important;font-size:%?56?%;font-style:normal;color:#333}.icon.biaoqing[data-v-b1eec9d8]:before{content:"\\e797"}.icon.jianpan[data-v-b1eec9d8]:before{content:"\\e7b2"}.icon.yuyin[data-v-b1eec9d8]:before{content:"\\e805"}.icon.tupian[data-v-b1eec9d8]:before{content:"\\e639"}.icon.chehui[data-v-b1eec9d8]:before{content:"\\e904"}.icon.luyin[data-v-b1eec9d8]:before{content:"\\e905"}.icon.luyin2[data-v-b1eec9d8]:before{content:"\\e677"}.icon.other-voice[data-v-b1eec9d8]:before{content:"\\e667"}.icon.my-voice[data-v-b1eec9d8]:before{content:"\\e906"}.icon.hongbao[data-v-b1eec9d8]:before{content:"\\e626"}.icon.tupian2[data-v-b1eec9d8]:before{content:"\\e674"}.icon.paizhao[data-v-b1eec9d8]:before{content:"\\e63e"}.icon.add[data-v-b1eec9d8]:before{content:"\\e655"}.icon.close[data-v-b1eec9d8]:before{content:"\\e607"}.icon.to[data-v-b1eec9d8]:before{content:"\\e675"}.hidden[data-v-b1eec9d8]{display:none!important}.popup-layer[data-v-b1eec9d8]{transition:all .15s linear;width:100%;height:42vw;padding:%?20?% 2%;background-color:#f3f3f3;border-top:solid %?1?% #ddd;position:fixed;z-index:20;top:100%}.popup-layer.showLayer[data-v-b1eec9d8]{-webkit-transform:translate3d(0,-43vw,0);transform:translate3d(0,-43vw,0)}.popup-layer .emoji-swiper[data-v-b1eec9d8]{height:40vw}.popup-layer .emoji-swiper uni-swiper-item[data-v-b1eec9d8]{display:flex;align-content:flex-start;flex-wrap:wrap}.popup-layer .emoji-swiper uni-swiper-item uni-view[data-v-b1eec9d8]{width:12vw;height:12vw;display:flex;justify-content:center;align-items:center}.popup-layer .emoji-swiper uni-swiper-item uni-view uni-image[data-v-b1eec9d8]{width:8.4vw;height:8.4vw}.popup-layer .more-layer[data-v-b1eec9d8]{width:100%;height:42vw}.popup-layer .more-layer .list[data-v-b1eec9d8]{width:100%;display:flex;flex-wrap:wrap}.popup-layer .more-layer .list .box[data-v-b1eec9d8]{width:18vw;height:18vw;border-radius:%?20?%;background-color:#fff;display:flex;justify-content:center;align-items:center;margin:0 3vw 2vw 3vw}.popup-layer .more-layer .list .box .icon[data-v-b1eec9d8]{font-size:%?70?%}.input-box[data-v-b1eec9d8]{width:100%;min-height:%?100?%;padding:0 1%;background-color:#f2f2f2;display:flex;position:fixed;z-index:20;bottom:%?-2?%;transition:all .15s linear;border-bottom:solid %?1?% #ddd}.input-box.showLayer[data-v-b1eec9d8]{-webkit-transform:translate3d(0,-43vw,0);transform:translate3d(0,-43vw,0)}.input-box .voice[data-v-b1eec9d8], .input-box .more[data-v-b1eec9d8]{flex-shrink:0;width:%?90?%;height:%?100?%;display:flex;justify-content:center;align-items:center}.input-box .send[data-v-b1eec9d8]{margin-left:%?20?%;flex-shrink:0;width:%?100?%;height:%?100?%;display:flex;align-items:center}.input-box .send .btn[data-v-b1eec9d8]{width:%?90?%;height:%?56?%;display:flex;justify-content:center;align-items:center;background:linear-gradient(90deg,#f09b37,#eb632c);color:#fff;border-radius:%?6?%;font-size:%?24?%}.input-box .textbox[data-v-b1eec9d8]{width:100%;min-height:%?70?%}.input-box .textbox .voice-mode[data-v-b1eec9d8]{width:calc(100% - %?2?%);height:%?68?%;border-radius:%?70?%;border:solid %?1?% #cdcdcd;display:flex;justify-content:center;align-items:center;font-size:%?28?%;background-color:#fff;color:#555}.input-box .textbox .voice-mode.recording[data-v-b1eec9d8]{background-color:#e5e5e5}.input-box .textbox .text-mode[data-v-b1eec9d8]{width:100%;min-height:%?70?%;display:flex;background-color:#fff;border-radius:%?40?%}.input-box .textbox .text-mode .box[data-v-b1eec9d8]{width:100%;padding-left:%?30?%;min-height:%?70?%;display:flex;align-items:center}.input-box .textbox .text-mode .box uni-textarea[data-v-b1eec9d8]{width:100%}.input-box .textbox .text-mode .em[data-v-b1eec9d8]{flex-shrink:0;width:%?80?%;padding-left:%?10?%;height:%?70?%;display:flex;justify-content:center;align-items:center}.record[data-v-b1eec9d8]{width:40vw;height:40vw;position:fixed;top:55%;left:30%;background-color:rgba(0,0,0,.6);border-radius:%?20?%}.record .ing[data-v-b1eec9d8]{width:100%;height:30vw;display:flex;justify-content:center;align-items:center}@-webkit-keyframes volatility-data-v-b1eec9d8{0%{background-position:0 130%}20%{background-position:0 150%}30%{background-position:0 155%}40%{background-position:0 150%}50%{background-position:0 145%}70%{background-position:0 150%}80%{background-position:0 155%}90%{background-position:0 140%}100%{background-position:0 135%}}@keyframes volatility-data-v-b1eec9d8{0%{background-position:0 130%}20%{background-position:0 150%}30%{background-position:0 155%}40%{background-position:0 150%}50%{background-position:0 145%}70%{background-position:0 150%}80%{background-position:0 155%}90%{background-position:0 140%}100%{background-position:0 135%}}.record .ing .icon[data-v-b1eec9d8]{background-image:linear-gradient(180deg,#f09b37,#fff 50%);background-size:100% 200%;-webkit-animation:volatility-data-v-b1eec9d8 1.5s ease-in-out -1.5s infinite alternate;animation:volatility-data-v-b1eec9d8 1.5s ease-in-out -1.5s infinite alternate;-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-size:%?150?%;color:#f09b37}.record .cancel[data-v-b1eec9d8]{width:100%;height:30vw;display:flex;justify-content:center;align-items:center}.record .cancel .icon[data-v-b1eec9d8]{color:#fff;font-size:%?150?%}.record .tis[data-v-b1eec9d8]{width:100%;height:10vw;display:flex;justify-content:center;font-size:%?28?%;color:#fff}.record .tis.change[data-v-b1eec9d8]{color:#f09b37}.content[data-v-b1eec9d8]{width:100%}.content .msg-list[data-v-b1eec9d8]{width:100%;padding:0 2%;position:absolute;top:0;bottom:%?100?%;padding-bottom:calc(env(safe-area-inset-bottom) / 2)}.content .msg-list .loading[data-v-b1eec9d8]{display:flex;justify-content:center}@-webkit-keyframes stretchdelay-data-v-b1eec9d8{0%, 40%, 100%{-webkit-transform:scaleY(.6);transform:scaleY(.6)}20%{-webkit-transform:scaleY(1);transform:scaleY(1)}}@keyframes stretchdelay-data-v-b1eec9d8{0%, 40%, 100%{-webkit-transform:scaleY(.6);transform:scaleY(.6)}20%{-webkit-transform:scaleY(1);transform:scaleY(1)}}.content .msg-list .loading .spinner[data-v-b1eec9d8]{margin:%?20?% 0;width:%?60?%;height:%?100?%;display:flex;align-items:center;justify-content:space-between}.content .msg-list .loading .spinner uni-view[data-v-b1eec9d8]{background-color:#f06c7a;height:%?50?%;width:%?6?%;border-radius:%?6?%;-webkit-animation:stretchdelay-data-v-b1eec9d8 1.2s infinite ease-in-out;animation:stretchdelay-data-v-b1eec9d8 1.2s infinite ease-in-out}.content .msg-list .loading .spinner .rect2[data-v-b1eec9d8]{-webkit-animation-delay:-1.1s;animation-delay:-1.1s}.content .msg-list .loading .spinner .rect3[data-v-b1eec9d8]{-webkit-animation-delay:-1s;animation-delay:-1s}.content .msg-list .loading .spinner .rect4[data-v-b1eec9d8]{-webkit-animation-delay:-.9s;animation-delay:-.9s}.content .msg-list .loading .spinner .rect5[data-v-b1eec9d8]{-webkit-animation-delay:-.8s;animation-delay:-.8s}.content .msg-list .row[data-v-b1eec9d8]{padding:%?20?% 0}.content .msg-list .row .system[data-v-b1eec9d8]{display:flex;justify-content:center}.content .msg-list .row .system uni-view[data-v-b1eec9d8]{padding:0 %?30?%;height:%?50?%;display:flex;justify-content:center;align-items:center;background-color:#c9c9c9;color:#fff;font-size:%?24?%;border-radius:%?40?%}.content .msg-list .row .system .red-envelope uni-image[data-v-b1eec9d8]{margin-right:%?5?%;width:%?30?%;height:%?30?%}.content .msg-list .row[data-v-b1eec9d8]:first-child{margin-top:%?20?%}.content .msg-list .row .my .left[data-v-b1eec9d8], .content .msg-list .row .other .right[data-v-b1eec9d8]{width:100%;display:flex}.content .msg-list .row .my .left .bubble[data-v-b1eec9d8], .content .msg-list .row .other .right .bubble[data-v-b1eec9d8]{max-width:70%;min-height:%?50?%;border-radius:%?10?%;padding:%?15?% %?20?%;display:flex;align-items:center;font-size:%?32?%;word-break:break-word}.content .msg-list .row .my .left .bubble.img[data-v-b1eec9d8], .content .msg-list .row .other .right .bubble.img[data-v-b1eec9d8]{background-color:initial;padding:0;overflow:hidden}.content .msg-list .row .my .left .bubble.img uni-image[data-v-b1eec9d8], .content .msg-list .row .other .right .bubble.img uni-image[data-v-b1eec9d8]{max-width:%?350?%;max-height:%?350?%}.content .msg-list .row .my .left .bubble.red-envelope[data-v-b1eec9d8], .content .msg-list .row .other .right .bubble.red-envelope[data-v-b1eec9d8]{background-color:initial;padding:0;overflow:hidden;position:relative;justify-content:center;align-items:flex-start}.content .msg-list .row .my .left .bubble.red-envelope uni-image[data-v-b1eec9d8], .content .msg-list .row .other .right .bubble.red-envelope uni-image[data-v-b1eec9d8]{width:%?250?%;height:%?313?%}.content .msg-list .row .my .left .bubble.red-envelope .tis[data-v-b1eec9d8], .content .msg-list .row .other .right .bubble.red-envelope .tis[data-v-b1eec9d8]{position:absolute;top:6%;font-size:%?26?%;color:#9c1712}.content .msg-list .row .my .left .bubble.red-envelope .blessing[data-v-b1eec9d8], .content .msg-list .row .other .right .bubble.red-envelope .blessing[data-v-b1eec9d8]{position:absolute;bottom:14%;color:#e9b874;width:80%;text-align:center;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.content .msg-list .row .my .left .bubble.voice .icon[data-v-b1eec9d8], .content .msg-list .row .other .right .bubble.voice .icon[data-v-b1eec9d8]{font-size:%?40?%;display:flex;align-items:center}.content .msg-list .row .my .left .bubble.voice .icon[data-v-b1eec9d8]:after, .content .msg-list .row .other .right .bubble.voice .icon[data-v-b1eec9d8]:after{content:" ";width:%?53?%;height:%?53?%;border-radius:100%;position:absolute;box-sizing:border-box}.content .msg-list .row .my .left .bubble.voice .length[data-v-b1eec9d8], .content .msg-list .row .other .right .bubble.voice .length[data-v-b1eec9d8]{font-size:%?28?%}.content .msg-list .row .my .right[data-v-b1eec9d8], .content .msg-list .row .other .left[data-v-b1eec9d8]{flex-shrink:0;width:%?80?%;height:%?80?%}.content .msg-list .row .my .right uni-image[data-v-b1eec9d8], .content .msg-list .row .other .left uni-image[data-v-b1eec9d8]{width:%?80?%;height:%?80?%;border-radius:%?10?%}.content .msg-list .row .my[data-v-b1eec9d8]{width:100%;display:flex;justify-content:flex-end}.content .msg-list .row .my .left[data-v-b1eec9d8]{min-height:%?80?%;align-items:center;justify-content:flex-end}.content .msg-list .row .my .left .bubble[data-v-b1eec9d8]{background-color:#f06c7a;color:#fff}.content .msg-list .row .my .left .bubble.voice .icon[data-v-b1eec9d8]{color:#fff}.content .msg-list .row .my .left .bubble.voice .length[data-v-b1eec9d8]{margin-right:%?20?%}@-webkit-keyframes my-play-data-v-b1eec9d8{0%{-webkit-transform:translateX(80%);transform:translateX(80%)}100%{-webkit-transform:translateX(0);transform:translateX(0)}}@keyframes my-play-data-v-b1eec9d8{0%{-webkit-transform:translateX(80%);transform:translateX(80%)}100%{-webkit-transform:translateX(0);transform:translateX(0)}}.content .msg-list .row .my .left .bubble.play .icon[data-v-b1eec9d8]:after{border-left:solid %?10?% rgba(240,108,122,.5);-webkit-animation:my-play-data-v-b1eec9d8 1s linear infinite;animation:my-play-data-v-b1eec9d8 1s linear infinite}.content .msg-list .row .my .right[data-v-b1eec9d8]{margin-left:%?15?%}.content .msg-list .row .other[data-v-b1eec9d8]{width:100%;display:flex}.content .msg-list .row .other .left[data-v-b1eec9d8]{margin-right:%?15?%}.content .msg-list .row .other .right[data-v-b1eec9d8]{flex-wrap:wrap}.content .msg-list .row .other .right .username[data-v-b1eec9d8]{width:100%;height:%?45?%;line-height:%?30?%;font-size:%?24?%;color:#999;display:flex}.content .msg-list .row .other .right .username .name[data-v-b1eec9d8]{margin-right:%?50?%}.content .msg-list .row .other .right .bubble[data-v-b1eec9d8]{background-color:#fff;color:#333}.content .msg-list .row .other .right .bubble.voice .icon[data-v-b1eec9d8]{color:#333}.content .msg-list .row .other .right .bubble.voice .length[data-v-b1eec9d8]{margin-left:%?20?%}@-webkit-keyframes other-play-data-v-b1eec9d8{0%{-webkit-transform:translateX(-80%);transform:translateX(-80%)}100%{-webkit-transform:translateX(0);transform:translateX(0)}}@keyframes other-play-data-v-b1eec9d8{0%{-webkit-transform:translateX(-80%);transform:translateX(-80%)}100%{-webkit-transform:translateX(0);transform:translateX(0)}}.content .msg-list .row .other .right .bubble.play .icon[data-v-b1eec9d8]:after{border-right:solid %?10?% hsla(0,0%,100%,.8);-webkit-animation:other-play-data-v-b1eec9d8 1s linear infinite;animation:other-play-data-v-b1eec9d8 1s linear infinite}.windows .mask[data-v-b1eec9d8]{position:fixed;top:100%;width:100%;height:100%;z-index:1000;background-color:rgba(0,0,0,.6);opacity:0;transition:opacity .2s ease-out}.windows .layer[data-v-b1eec9d8]{position:fixed;width:80%;height:70%;left:10%;z-index:1001;border-radius:%?20?%;overflow:hidden;top:100%;-webkit-transform:scale3d(.5,.5,1);transform:scale3d(.5,.5,1);transition:all .2s ease-out}.windows.show[data-v-b1eec9d8]{display:block}.windows.show .mask[data-v-b1eec9d8]{top:0;opacity:1}.windows.show .layer[data-v-b1eec9d8]{-webkit-transform:translate3d(0,-85vh,0) scaleX(1);transform:translate3d(0,-85vh,0) scaleX(1)}.windows.hide[data-v-b1eec9d8]{display:block}.windows.hide .mask[data-v-b1eec9d8]{top:0;opacity:0}.open-redenvelope[data-v-b1eec9d8]{width:100%;height:70vh;background-color:#cf3c35;position:relative}.open-redenvelope .top[data-v-b1eec9d8]{width:100%;background-color:#fe5454;display:flex;justify-content:center;flex-wrap:wrap;border-radius:0 0 100% 100%;box-shadow:inset 0 %?-20?% 0 #9c1712;margin-bottom:%?65?%}.open-redenvelope .top .close-btn[data-v-b1eec9d8]{width:100%;height:%?80?%;display:flex;justify-content:flex-end;margin-bottom:%?30?%}.open-redenvelope .top .close-btn .icon[data-v-b1eec9d8]{color:#9c1712;margin-top:%?10?%;margin-right:%?10?%}.open-redenvelope .top uni-image[data-v-b1eec9d8]{width:%?130?%;height:%?130?%;border:solid %?12?% #cf3c35;border-radius:100%;margin-bottom:%?-65?%}.open-redenvelope .from[data-v-b1eec9d8], .open-redenvelope .blessing[data-v-b1eec9d8], .open-redenvelope .money[data-v-b1eec9d8], .open-redenvelope .showDetails[data-v-b1eec9d8]{width:100%;padding:%?5?% 5%;display:flex;justify-content:center;font-size:%?32?%;color:#fff}.open-redenvelope .money[data-v-b1eec9d8]{font-size:%?100?%;color:#f8d757;display:flex;padding-top:%?20?%}.open-redenvelope .showDetails[data-v-b1eec9d8]{position:absolute;bottom:%?20?%;align-items:center;font-size:%?28?%;color:#f8d757}.open-redenvelope .showDetails .icon[data-v-b1eec9d8]{font-size:%?26?%;color:#f8d757}.content .showLayer[data-v-b1eec9d8]{-webkit-transform:translate3d(0,-43vw,0);transform:translate3d(0,-43vw,0)}',""]),e.exports=t},"32e1":function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("3c65"),n("14d9"),n("ac1f"),n("5319"),n("e9c4"),n("e25e");var i={data:function(){return{textMsg:"",isHistoryLoading:!1,scrollAnimation:!1,scrollTop:0,scrollToView:"",msgList:[],msgImgList:[],myuid:0,isVoice:!1,voiceTis:"按住 说话",recordTis:"手指上滑 取消发送",recording:!1,willStop:!1,initPoint:{identifier:0,Y:0},recordTimer:null,recordLength:0,AUDIO:uni.createInnerAudioContext(),playMsgid:null,VoiceTimer:null,popupLayerClass:"",hideMore:!0,hideEmoji:!0,emojiList:[[{url:"1.png",alt:"[微笑]"},{url:"2.png",alt:"[生气]"},{url:"3.png",alt:"[坏笑]"},{url:"4.png",alt:"[难受]"},{url:"5.png",alt:"[困]"},{url:"6.png",alt:"[偷看]"},{url:"7.png",alt:"[难过]"},{url:"8.png",alt:"[斜眼]"},{url:"9.png",alt:"[委屈]"},{url:"10.png",alt:"[害羞]"},{url:"11.png",alt:"[裂开]"},{url:"12.png",alt:"[偷笑]"},{url:"13.png",alt:"[痛苦]"},{url:"14.png",alt:"[白眼]"},{url:"15.png",alt:"[丑]"},{url:"16.png",alt:"[哇哇哭]"},{url:"17.png",alt:"[笑嘻嘻]"},{url:"18.png",alt:"[盯着你]"},{url:"19.png",alt:"[啊哈]"},{url:"20.png",alt:"[吃瓜]"},{url:"21.png",alt:"[哦吼]"},{url:"22.png",alt:"[哭死]"},{url:"23.png",alt:"[打脸]"},{url:"24.png",alt:"[斗鸡眼]"}],[{url:"25.png",alt:"[发呆]"},{url:"26.png",alt:"[憨笑]"},{url:"27.png",alt:"[无语]"},{url:"28.png",alt:"[鸡贼]"},{url:"29.png",alt:"[大无语]"},{url:"30.png",alt:"[哭吐了]"},{url:"31.png",alt:"[呲牙笑]"},{url:"32.png",alt:"[奸笑]"},{url:"33.png",alt:"[啊啊啊]"},{url:"34.png",alt:"[哈嘿]"},{url:"35.png",alt:"[惊讶]"},{url:"36.png",alt:"[指你]"},{url:"37.png",alt:"[可爱型]"},{url:"38.png",alt:"[快哭了]"},{url:"39.png",alt:"[抠鼻屎]"},{url:"40.png",alt:"[酷酷]"},{url:"41.png",alt:"[笑汗]"},{url:"42.png",alt:"[算命]"},{url:"43.png",alt:"[红脸坏笑]"},{url:"44.png",alt:"[委屈死了]"},{url:"45.png",alt:"[爆炸]"},{url:"46.png",alt:"[吐了]"},{url:"47.png",alt:"[么么哒]"},{url:"48.png",alt:"[吐血]"}],[{url:"49.png",alt:"[面无表情]"},{url:"50.png",alt:"[捂嘴吐]"},{url:"51.png",alt:"[斜眼看]"},{url:"52.png",alt:"[花痴]"},{url:"53.png",alt:"[被打]"},{url:"54.png",alt:"[瞌睡]"},{url:"55.png",alt:"[冥想]"},{url:"56.png",alt:"[俏皮]"},{url:"57.png",alt:"[戳手委屈]"},{url:"58.png",alt:"[端庄]"},{url:"59.png",alt:"[emmm]"},{url:"60.png",alt:"[欢呼]"},{url:"61.png",alt:"[笑哭了]"},{url:"62.png",alt:"[抱抱]"},{url:"63.png",alt:"[闭眼笑]"},{url:"64.png",alt:"[捂嘴微笑]"},{url:"65.png",alt:"[笑哭2]"},{url:"66.png",alt:"[笑嘻嘻]"},{url:"67.png",alt:"[笑露齿]"},{url:"68.png",alt:"[阴脸笑]"},{url:"69.png",alt:"[问号脸]"},{url:"70.png",alt:"[拜拜]"},{url:"71.png",alt:"[难受2]"},{url:"72.png",alt:"[傻笑2]"}],[{url:"73.png",alt:"[爆炸2]"},{url:"74.png",alt:"[二哈]"},{url:"75.png",alt:"[二哈吐舌]"},{url:"76.png",alt:"[狗狗笑哭]"},{url:"77.png",alt:"[狗狗绿帽]"},{url:"78.png",alt:"[狗狗张嘴]"},{url:"79.png",alt:"[狗狗绿扇]"},{url:"80.png",alt:"[狗狗]"},{url:"81.png",alt:"[猫咪]"},{url:"82.png",alt:"[牛啊]"},{url:"83.png",alt:"[爱心]"},{url:"84.png",alt:"[心裂开]"},{url:"85.png",alt:"[玫瑰花]"},{url:"86.png",alt:"[枯萎]"},{url:"87.png",alt:"[棒]"},{url:"88.png",alt:"[差]"},{url:"89.png",alt:"[红药]"},{url:"90.png",alt:"[绿药]"},{url:"91.png",alt:"[抱拳]"},{url:"92.png",alt:"[ok]"},{url:"93.png",alt:"[pk]"},{url:"94.png",alt:"[绿帽子]"},{url:"95.png",alt:"[菜刀]"}]],onlineEmoji:{"1.png":"1.png","2.png":"2.png","3.png":"3.png","4.png":"4.png","5.png":"5.png","6.png":"6.png","7.png":"7.png","8.png":"8.png","9.png":"9.png","10.png":"10.png","11.png":"11.png","12.png":"12.png","13.png":"13.png","14.png":"14.png","15.png":"15.png","16.png":"16.png","17.png":"17.png","18.png":"18.png","19.png":"19.png","20.png":"20.png","21.png":"21.png","22.png":"22.png","23.png":"23.png","24.png":"24.png","25.png":"25.png","26.png":"26.png","27.png":"27.png","28.png":"28.png","29.png":"29.png","30.png":"30.png","31.png":"31.png","32.png":"32.png","33.png":"33.png","34.png":"34.png","35.png":"35.png","36.png":"36.png","37.png":"37.png","38.png":"38.png","39.png":"39.png","40.png":"40.png","41.png":"41.png","42.png":"42.png","43.png":"43.png","44.png":"44.png","45.png":"45.png","46.png":"46.png","47.png":"47.png","48.png":"48.png","49.png":"49.png","50.png":"50.png","51.png":"51.png","52.png":"52.png","53.png":"53.png","54.png":"54.png","55.png":"55.png","56.png":"56.png","57.png":"57.png","58.png":"58.png","59.png":"59.png","60.png":"60.png","61.png":"61.png","62.png":"62.png","63.png":"63.png","64.png":"64.png","65.png":"65.png","66.png":"66.png","67.png":"67.png","68.png":"68.png","69.png":"69.png","70.png":"70.png","71.png":"71.png","72.png":"72.png","73.png":"73.png","74.png":"74.png","75.png":"75.png","76.png":"76.png","77.png":"77.png","78.png":"78.png","79.png":"79.png","80.png":"80.png","81.png":"81.png","82.png":"82.png","83.png":"83.png","84.png":"84.png","85.png":"85.png","86.png":"86.png","87.png":"87.png","88.png":"88.png","89.png":"89.png","90.png":"90.png","91.png":"91.png","92.png":"92.png","93.png":"93","94.png":"94.png","95.png":"95.png"},windowsState:"",redenvelopeData:{rid:null,from:null,face:null,blessing:null,money:null}}},onLoad:function(e){var t=this;this.getMsgList(),this.AUDIO.onEnded((function(e){t.playMsgid=null}))},onShow:function(){var e=this;this.scrollTop=9999999,uni.getStorage({key:"redEnvelopeData",success:function(t){console.log(t.data);var n=new Date,i=e.msgList[e.msgList.length-1].msg.id;i++;var s={type:"user",msg:{id:i,type:"redEnvelope",time:n.getHours()+":"+n.getMinutes(),userinfo:{uid:0,username:"大黑哥",face:"https://zhoukaiwen.com/img/kevinLogo.png"},content:{blessing:t.data.blessing,rid:Math.floor(1e3*Math.random()+1),isReceived:!1}}};e.screenMsg(s),uni.removeStorage({key:"redEnvelopeData"})}})},methods:{screenMsg:function(e){if("system"==e.type)switch(e.msg.type){case"text":this.addSystemTextMsg(e);break;case"redEnvelope":this.addSystemRedEnvelopeMsg(e);break}else if("user"==e.type){switch(e.msg.type){case"text":this.addTextMsg(e);break;case"voice":this.addVoiceMsg(e);break;case"img":this.addImgMsg(e);break;case"redEnvelope":this.addRedEnvelopeMsg(e);break}console.log("用户消息"),e.msg.userinfo.uid!=this.myuid&&(console.log("振动"),uni.vibrateLong())}this.$nextTick((function(){this.scrollToView="msg"+e.msg.id}))},loadHistory:function(e){var t=this;if(!this.isHistoryLoading){this.isHistoryLoading=!0,this.scrollAnimation=!1;var n=this.msgList[0].msg.id;setTimeout((function(){for(var e=[{type:"user",msg:{id:1,type:"text",time:"12:56",userinfo:{uid:0,username:"大黑哥",face:"https://zhoukaiwen.com/img/kevinLogo.png"},content:{text:"web前端开发该怎么学习？"}}},{type:"user",msg:{id:2,type:"text",time:"12:57",userinfo:{uid:1,username:"售后客服008",face:"https://zhoukaiwen.com/img/qdpz/face/face_2.jpg"},content:{text:"按照基本路线，从html、css、js三大基础开始，然后ajax、vue进阶学习，最后学习小程序、node、react。"}}},{type:"user",msg:{id:3,type:"voice",time:"12:59",userinfo:{uid:1,username:"售后客服008",face:"https://zhoukaiwen.com/img/qdpz/face/face_2.jpg"},content:{url:"/static/voice/1.mp3",length:"00:06"}}},{type:"user",msg:{id:4,type:"voice",time:"13:05",userinfo:{uid:0,username:"大黑哥",face:"https://zhoukaiwen.com/img/kevinLogo.png"},content:{url:"/static/voice/2.mp3",length:"00:06"}}}],i=0;i<e.length;i++)"user"==e[i].type&&"img"==e[i].msg.type&&(e[i].msg.content=t.setPicSize(e[i].msg.content),t.msgImgList.unshift(e[i].msg.content.url)),e[i].msg.id=Math.floor(1e3*Math.random()+1),t.msgList.unshift(e[i]);t.$nextTick((function(){this.scrollToView="msg"+n,this.$nextTick((function(){this.scrollAnimation=!0}))})),t.isHistoryLoading=!1}),1e3)}},getMsgList:function(){for(var e=[{type:"system",msg:{id:0,type:"text",content:{text:"欢迎进入Kevin聊天室"}}},{type:"user",msg:{id:1,type:"text",time:"12:56",userinfo:{uid:0,username:"大黑哥",face:"https://zhoukaiwen.com/img/kevinLogo.png"},content:{text:"web前端开发该怎么学习？"}}},{type:"user",msg:{id:2,type:"text",time:"12:57",userinfo:{uid:1,username:"售后客服008",face:"https://zhoukaiwen.com/img/qdpz/face/face_2.jpg"},content:{text:"按照基本路线，从html、css、js三大基础开始，然后ajax、vue进阶学习，最后学习小程序、node、react。"}}},{type:"user",msg:{id:3,type:"voice",time:"12:59",userinfo:{uid:1,username:"售后客服008",face:"https://zhoukaiwen.com/img/qdpz/face/face_2.jpg"},content:{url:"/static/voice/1.mp3",length:"00:06"}}},{type:"user",msg:{id:4,type:"voice",time:"13:05",userinfo:{uid:0,username:"大黑哥",face:"https://zhoukaiwen.com/img/kevinLogo.png"},content:{url:"/static/voice/2.mp3",length:"00:06"}}},{type:"user",msg:{id:5,type:"img",time:"13:05",userinfo:{uid:0,username:"大黑哥",face:"https://zhoukaiwen.com/img/kevinLogo.png"},content:{url:"https://zhoukaiwen.com/img/Design/logo/psketch3.png",w:200,h:200}}},{type:"user",msg:{id:6,type:"img",time:"12:59",userinfo:{uid:1,username:"售后客服008",face:"https://zhoukaiwen.com/img/qdpz/face/face_2.jpg"},content:{url:"https://zhoukaiwen.com/img/Design/pc/ybss_jt.png",w:1920,h:1080}}},{type:"system",msg:{id:7,type:"text",content:{text:"欢迎进入Kevin聊天室"}}},{type:"system",msg:{id:9,type:"redEnvelope",content:{text:"售后客服008领取了你的红包"}}},{type:"user",msg:{id:10,type:"redEnvelope",time:"12:56",userinfo:{uid:0,username:"大黑哥",face:"https://zhoukaiwen.com/img/kevinLogo.png"},content:{blessing:"恭喜发财，大吉大利，万事如意",rid:0,isReceived:!1}}},{type:"user",msg:{id:11,type:"redEnvelope",time:"12:56",userinfo:{uid:1,username:"售后客服008",face:"https://zhoukaiwen.com/img/qdpz/face/face_2.jpg"},content:{blessing:"恭喜发财",rid:1,isReceived:!1}}}],t=0;t<e.length;t++)"user"==e[t].type&&"img"==e[t].msg.type&&(e[t].msg.content=this.setPicSize(e[t].msg.content),this.msgImgList.push(e[t].msg.content.url));this.msgList=e,this.$nextTick((function(){this.scrollTop=9999,this.$nextTick((function(){this.scrollAnimation=!0}))}))},setPicSize:function(e){var t=uni.upx2px(350),n=uni.upx2px(350);if(e.w>t||e.h>n){var i=e.w/e.h;e.w=i>1?t:n*i,e.h=i>1?t/i:n}return e},showMore:function(){this.isVoice=!1,this.hideEmoji=!0,this.hideMore?(this.hideMore=!1,this.openDrawer()):this.hideDrawer()},openDrawer:function(){this.popupLayerClass="showLayer"},hideDrawer:function(){var e=this;this.popupLayerClass="",setTimeout((function(){e.hideMore=!0,e.hideEmoji=!0}),150)},chooseImage:function(){this.getImage("album")},camera:function(){this.getImage("camera")},handRedEnvelopes:function(){uni.navigateTo({url:"hand/hand"}),this.hideDrawer()},getImage:function(e){var t=this;this.hideDrawer(),uni.chooseImage({sourceType:[e],sizeType:["original","compressed"],success:function(e){for(var n=function(n){uni.getImageInfo({src:e.tempFilePaths[n],success:function(i){console.log(i.width),console.log(i.height);var s={url:e.tempFilePaths[n],w:i.width,h:i.height};t.sendMsg(s,"img")}})},i=0;i<e.tempFilePaths.length;i++)n(i)}})},chooseEmoji:function(){this.hideMore=!0,this.hideEmoji?(this.hideEmoji=!1,this.openDrawer()):this.hideDrawer()},addEmoji:function(e){this.textMsg+=e.alt},textareaFocus:function(){"showLayer"==this.popupLayerClass&&0==this.hideMore&&this.hideDrawer()},sendText:function(){if(this.hideDrawer(),this.textMsg){var e=this.replaceEmoji(this.textMsg),t={text:e};this.sendMsg(t,"text"),this.textMsg=""}},replaceEmoji:function(e){var t=this,n=e.replace(/\[([^(\]|\[)]*)\]/g,(function(n,i){console.log("str: "+e),console.log("index: "+i),console.log("item: "+n);for(var s=0;s<t.emojiList.length;s++)for(var o=t.emojiList[s],a=0;a<o.length;a++){var r=o[a];if(r.alt==n){var c='<img width="32rpx" src="https://zhoukaiwen.com/img/icon/emojj1/'+t.onlineEmoji[r.url]+'">';return console.log("imgstr: "+c),c}}}));return'<div style="display: flex;align-items: center;word-wrap:break-word;">'+n+"</div>"},sendMsg:function(e,t){var n=this,i=new Date,s=this.msgList[this.msgList.length-1].msg.id;s++;var o={type:"user",msg:{id:s,time:i.getHours()+":"+i.getMinutes(),type:t,userinfo:{uid:0,username:"大黑哥",face:"https://zhoukaiwen.com/img/kevinLogo.png"},content:e}};this.screenMsg(o),setTimeout((function(){s=n.msgList[n.msgList.length-1].msg.id,s++,o={type:"user",msg:{id:s,time:i.getHours()+":"+i.getMinutes(),type:t,userinfo:{uid:1,username:"售后客服008",face:"https://zhoukaiwen.com/img/qdpz/face/face_2.jpg"},content:e}},n.screenMsg(o)}),3e3)},addTextMsg:function(e){this.msgList.push(e)},addVoiceMsg:function(e){this.msgList.push(e)},addImgMsg:function(e){e.msg.content=this.setPicSize(e.msg.content),this.msgImgList.push(e.msg.content.url),this.msgList.push(e)},addRedEnvelopeMsg:function(e){this.msgList.push(e)},addSystemTextMsg:function(e){this.msgList.push(e)},addSystemRedEnvelopeMsg:function(e){this.msgList.push(e)},openRedEnvelope:function(e,t){var n=this,i=e.content.rid;uni.showLoading({title:"加载中..."}),console.log("index: "+t),setTimeout((function(){0==i?n.redenvelopeData={rid:0,from:"大黑哥",face:"https://zhoukaiwen.com/img/qdpz/face/face.jpg",blessing:"恭喜发财，大吉大利",money:"已领完"}:(n.redenvelopeData={rid:1,from:"售后客服008",face:"https://zhoukaiwen.com/img/qdpz/face/face_2.jpg",blessing:"恭喜发财",money:"0.01"},e.content.isReceived||(n.sendSystemMsg({text:"你领取了"+(e.userinfo.uid==n.myuid?"自己":e.userinfo.username)+"的红包"},"redEnvelope"),console.log("this.msgList[index]: "+JSON.stringify(n.msgList[t])),n.msgList[t].msg.content.isReceived=!0)),uni.hideLoading(),n.windowsState="show"}),200)},closeRedEnvelope:function(){var e=this;this.windowsState="hide",setTimeout((function(){e.windowsState=""}),200)},sendSystemMsg:function(e,t){var n=this.msgList[this.msgList.length-1].msg.id;n++;var i={type:"system",msg:{id:n,type:t,content:e}};this.screenMsg(i)},toDetails:function(e){uni.navigateTo({url:"details/details?rid="+e})},showPic:function(e){uni.previewImage({indicator:"none",current:e.content.url,urls:this.msgImgList})},playVoice:function(e){this.playMsgid=e.id,this.AUDIO.src=e.content.url,this.$nextTick((function(){this.AUDIO.play()}))},voiceBegin:function(e){e.touches.length>1||(this.initPoint.Y=e.touches[0].clientY,this.initPoint.identifier=e.touches[0].identifier,this.RECORDER.start({format:"mp3"}))},recordBegin:function(e){var t=this;this.recording=!0,this.voiceTis="松开 结束",this.recordLength=0,this.recordTimer=setInterval((function(){t.recordLength++}),1e3)},voiceCancel:function(){this.recording=!1,this.voiceTis="按住 说话",this.recordTis="手指上滑 取消发送",this.willStop=!0,this.RECORDER.stop()},voiceIng:function(e){if(this.recording){var t=e.touches[0];this.initPoint.Y-t.clientY>=uni.upx2px(100)?(this.willStop=!0,this.recordTis="松开手指 取消发送"):(this.willStop=!1,this.recordTis="手指上滑 取消发送")}},voiceEnd:function(e){this.recording&&(this.recording=!1,this.voiceTis="按住 说话",this.recordTis="手指上滑 取消发送",this.RECORDER.stop())},recordEnd:function(e){if(clearInterval(this.recordTimer),this.willStop)console.log("取消发送录音");else{console.log("e: "+JSON.stringify(e));var t={length:0,url:e.tempFilePath},n=parseInt(this.recordLength/60),i=this.recordLength%60;n=n<10?"0"+n:n,i=i<10?"0"+i:i,t.length=n+":"+i,this.sendMsg(t,"voice")}this.willStop=!1},switchVoice:function(){this.hideDrawer(),this.isVoice=!this.isVoice},discard:function(){}}};t.default=i},"388c":function(e,t,n){"use strict";n.r(t);var i=n("0a1b"),s=n("48d3");for(var o in s)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return s[e]}))}(o);n("3db2");var a=n("f0c5"),r=Object(a["a"])(s["default"],i["b"],i["c"],!1,null,"b1eec9d8",null,!1,i["a"],void 0);t["default"]=r.exports},"3db2":function(e,t,n){"use strict";var i=n("8605"),s=n.n(i);s.a},"48d3":function(e,t,n){"use strict";n.r(t);var i=n("32e1"),s=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=s.a},8605:function(e,t,n){var i=n("3227");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=n("4f06").default;s("7c149b6d",i,!0,{sourceMap:!1,shadowMode:!1})}}]);