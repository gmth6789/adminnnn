(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["tn_components-company"],{1951:function(t,i,e){"use strict";e.r(i);var o=e("430e"),n=e.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){e.d(i,t,(function(){return o[t]}))}(a);i["default"]=n.a},"430e":function(t,i,e){"use strict";e("7a82");var o=e("4ea4").default;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("a434"),e("14d9");var n=o(e("6d51")),a={data:function(){return{getHeight:"200",device:"back",flash:"off",nowTime:"",nowTime2:"",address:"",sgdUrl:"https://cdn.zhoukaiwen.com/sgd.png",imgList:[],imgListData:"",rreportShow:!1,src:"",w:"",h:""}},onLoad:function(){var t,i=this;uni.getSystemInfo({success:function(t){i.getHeight=t.windowHeight}}),uni.showModal({title:"在途异常上报",content:"车辆行驶途中，道路发生拥堵/事故等情况无法正常驶离时，请拍照上报企业，保留证据。",showCancel:!1,confirmText:"知道了",confirmColor:"#3056F6",success:function(t){t.confirm&&console.log("用户点击确定")}}),this.getTime(),uni.getLocation({type:"wgs84",success:function(e){console.log("当前位置的经度："+e.longitude),console.log("当前位置的纬度："+e.latitude),t=new n.default({key:"662BZ-2EAR6-M34S7-M4NPO-HFV3F-QEBTV"}),t.reverseGeocoder({location:{latitude:e.latitude,longitude:e.longitude},success:function(t){console.log(t),i.address=t.result.address},fail:function(t){}})}})},methods:{endBtn:function(){this.rreportShow=!1,this.imgList=[]},reportBtn:function(){this.rreportShow=!0;this.imgListData;var t=this.imgListData.substr(0,this.imgListData.length-1);console.log(t)},xzBtn:function(){"front"==this.device?this.device="back":this.device="front"},sgdBtn:function(){"off"==this.flash?(this.flash="on",this.sgdUrl="https://cdn.zhoukaiwen.com/sgd_on.png"):(this.flash="off",this.sgdUrl="https://cdn.zhoukaiwen.com/sgd.png")},DelImg:function(t){var i=this;uni.showModal({content:"确定要删除这张照片吗？",cancelText:"取消",confirmText:"确认",success:function(e){if(e.confirm){console.log(t),i.imgList.splice(t.currentTarget.dataset.index,1),console.log(i.imgList);for(var o=i.imgList,n="",a=0;a<o.length;a++)n+=o[a].src+",";i.imgListData=n,console.log(i.imgListData)}}})},ViewImage:function(t){var i=[this.imgList[t].src];console.log(i),uni.previewImage({urls:i})},takePhoto:function(){var t=this,i=this;if(this.imgList.length<3){var e=uni.createCameraContext();e.takePhoto({quality:"high",success:function(e){var o=e.tempImagePath;uni.getImageInfo({src:e.tempImagePath,success:function(n){i.w=n.width/3+"px",i.h=n.height/3.01+"px";var a=uni.createCanvasContext("firstCanvas");a.drawImage(e.tempImagePath,0,0,n.width/3,n.height/3),a.setFontSize(12),a.setFillStyle("#FFFFFF");var s=n.width/3*.03,c=n.height/3*.9;a.fillText("陕A88888",s,c),a.setFontSize(10);var r=n.height/3*.94;a.fillText(i.nowTime+" "+i.nowTime2,s,r);var l=n.height/3*.98;a.fillText(i.address,s,l),a.draw(!1,(function(){setTimeout((function(){uni.canvasToTempFilePath({canvasId:"firstCanvas",success:function(i){o=i.tempFilePath,console.log("----------",o),t.imgList.push({src:o}),console.log(t.imgList);for(var e=t.imgList,n="",a=0;a<e.length;a++)n+=e[a].src+",";t.imgListData=n,console.log(t.imgListData)}})}),1e3)}))}})}})}else uni.showToast({title:"最大上传3张照片",duration:2e3,icon:"none"})},error:function(t){console.log(t.detail)},getTime:function(){var t=new Date,i=t.getFullYear(),e=t.getMonth()+1,o=t.getDate(),n=t.getHours()<10?"0"+t.getHours():t.getHours(),a=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),s=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();e>=1&&e<=9&&(e="0"+e),o>=0&&o<=9&&(o="0"+o);var c=i+"年"+e+"月"+o+"日",r=n+":"+a+":"+s;this.nowTime=c,this.nowTime2=r,console.log(this.nowTime),console.log(this.nowTime2)},goBack:function(){uni.navigateBack({delta:1})},history:function(){uni.navigateTo({url:"timeline"})}}};i.default=a},5312:function(t,i,e){var o=e("e74f");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=e("4f06").default;n("26293cf5",o,!0,{sourceMap:!1,shadowMode:!1})},"65b1":function(t,i,e){"use strict";e.d(i,"b",(function(){return o})),e.d(i,"c",(function(){return n})),e.d(i,"a",(function(){}));var o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",[e("v-uni-camera",{style:{width:"100%",position:"relative",height:t.getHeight+"px"},attrs:{"device-position":t.device,flash:t.flash},on:{error:function(i){arguments[0]=i=t.$handleEvent(i),t.error.apply(void 0,arguments)}}},[e("v-uni-cover-view",{staticClass:"topBox"},[e("v-uni-cover-view",{staticClass:"topItem text-bold text-xl"},[t._v("陕A·88888")]),e("v-uni-cover-view",{staticClass:"topItem"},[t._v(t._s(t.nowTime2))]),e("v-uni-cover-view",{staticClass:"topItem"},[t._v(t._s(t.nowTime))]),e("v-uni-cover-view",{staticClass:"topItem"},[t._v(t._s(t.address))])],1),e("v-uni-cover-image",{staticClass:"xzImg",attrs:{src:"https://cdn.zhoukaiwen.com/xz.png"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.xzBtn.apply(void 0,arguments)}}}),e("v-uni-cover-image",{staticClass:"sgdImg",attrs:{src:t.sgdUrl},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.sgdBtn.apply(void 0,arguments)}}}),e("v-uni-cover-view",{staticClass:"cameraBtn",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.takePhoto.apply(void 0,arguments)}}},[e("v-uni-cover-view",{staticClass:"cameraBtn2"})],1),t.imgList.length<1?e("v-uni-cover-view",{staticClass:"bottomBtn"},[e("v-uni-cover-view",{staticClass:"btn",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.history.apply(void 0,arguments)}}},[t._v("历史")]),e("v-uni-cover-view",{staticClass:"btn",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goBack.apply(void 0,arguments)}}},[t._v("取消")])],1):t._e(),t.imgList.length>0?e("v-uni-cover-view",{staticClass:"bottomBg"},[e("v-uni-cover-view",t._l(t.imgList,(function(i,o){return e("v-uni-cover-view",{key:o,staticClass:"imgBox",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.ViewImage(o)}}},[e("v-uni-cover-image",{staticClass:"imgItem",attrs:{src:i.src,mode:"aspectFill"}}),e("v-uni-cover-view",{staticClass:"cu-tag",attrs:{"data-index":o},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.DelImg.apply(void 0,arguments)}}},[e("v-uni-cover-image",{staticClass:"iconClose",attrs:{src:"https://cdn.zhoukaiwen.com/icon_close.png",mode:"aspectFill"}})],1)],1)})),1),e("v-uni-cover-view",{staticClass:"report",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.reportBtn.apply(void 0,arguments)}}},[t._v("上报（"+t._s(t.imgList.length)+"）")])],1):t._e(),t.rreportShow?e("v-uni-cover-view",{staticClass:"reportBox animation-slide-bottom"},[e("v-uni-cover-view",{staticClass:"text-lg margin-left-sm margin-bottom-sm",staticStyle:{height:"78rpx","line-height":"78rpx"}},[t._v("请选择照片备注内容")]),e("v-uni-cover-view",{staticClass:"listBox"},[e("v-uni-cover-view",{staticClass:"item active"},[t._v("堵车")]),e("v-uni-cover-view",{staticClass:"item"},[t._v("事故")]),e("v-uni-cover-view",{staticClass:"item"},[t._v("停车休息")]),e("v-uni-cover-view",{staticClass:"item"},[t._v("车辆故障")]),e("v-uni-cover-view",{staticClass:"item"},[t._v("加油")]),e("v-uni-cover-view",{staticClass:"item"},[t._v("恶劣天气")]),e("v-uni-cover-view",{staticClass:"item"},[t._v("货物巡检")]),e("v-uni-cover-view",{staticClass:"item"},[t._v("其他")])],1),e("v-uni-cover-view",{staticClass:"repBtn",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.endBtn.apply(void 0,arguments)}}},[t._v("上报异常")])],1):t._e()],1),e("v-uni-view",{staticStyle:{position:"absolute",top:"-999999px"}},[e("v-uni-view",[e("v-uni-canvas",{style:{width:t.w,height:t.h},attrs:{"canvas-id":"firstCanvas"}})],1)],1)],1)},n=[]},"7de5":function(t,i,e){"use strict";var o=e("5312"),n=e.n(o);n.a},"8b17":function(t,i,e){"use strict";e.r(i);var o=e("65b1"),n=e("1951");for(var a in n)["default"].indexOf(a)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(a);e("7de5");var s=e("f0c5"),c=Object(s["a"])(n["default"],o["b"],o["c"],!1,null,"7a9d1a0f",null,!1,o["a"],void 0);i["default"]=c.exports},e74f:function(t,i,e){var o=e("24fb");i=o(!1),i.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.topBox[data-v-7a9d1a0f]{width:%?750?%;box-sizing:border-box;padding:%?30?%;color:#eee;font-size:%?34?%}.topBox .topItem[data-v-7a9d1a0f]{width:100%;white-space:pre-wrap;margin-bottom:%?15?%}.cameraBtn[data-v-7a9d1a0f]{width:%?120?%;height:%?120?%;line-height:%?120?%;border:%?6?% #fff solid;border-radius:50%;padding:%?8?%;position:absolute;left:calc(50% - %?60?%);bottom:%?210?%}.cameraBtn2[data-v-7a9d1a0f]{width:100%;height:100%;border-radius:50%;background-color:#fff;text-align:center;color:#007aff}.xzImg[data-v-7a9d1a0f]{width:%?52?%;height:auto;position:absolute;right:%?44?%;bottom:%?580?%}.sgdImg[data-v-7a9d1a0f]{width:%?40?%;height:auto;position:absolute;right:%?50?%;bottom:%?450?%}.bottomBtn[data-v-7a9d1a0f]{width:100%;height:%?150?%;padding-bottom:%?15?%;position:absolute;bottom:0;left:0;text-align:center;display:flex;justify-content:space-between}.bottomBtn .btn[data-v-7a9d1a0f]{width:30%;height:%?150?%;font-size:%?34?%;color:#fff;line-height:%?150?%}.bottomBg[data-v-7a9d1a0f]{width:100%;height:%?170?%;box-sizing:border-box;padding:%?20?% %?30?% %?40?%;position:absolute;bottom:0;left:0;background-color:rgba(0,0,0,.8);display:flex;justify-content:space-between;align-items:center}.bottomBg .imgBox[data-v-7a9d1a0f]{width:%?110?%;height:%?110?%;float:left;margin-right:%?40?%;position:relative}.bottomBg .imgBox .cu-tag[data-v-7a9d1a0f]{position:absolute;right:0;top:0;border-bottom-left-radius:2px;padding:3px 5px;height:auto;background-color:rgba(0,0,0,.5);font-size:10px;vertical-align:middle;font-family:Helvetica Neue,Helvetica,sans-serif;white-space:nowrap;color:#fff}.bottomBg .imgItem[data-v-7a9d1a0f]{width:%?110?%;height:%?110?%}.report[data-v-7a9d1a0f]{height:%?68?%;line-height:%?68?%;text-align:center;color:#fff;box-sizing:border-box;padding:%?0?% %?20?%;border-radius:%?10?%;background-color:#2157ff}.iconClose[data-v-7a9d1a0f]{width:%?20?%;height:%?20?%}.reportBox[data-v-7a9d1a0f]{width:%?750?%;height:auto;box-sizing:border-box;padding:%?10?% %?20?%;background-color:#fff;position:absolute;bottom:0}.listBox[data-v-7a9d1a0f]{display:flex;flex-wrap:wrap;justify-content:space-around}.item[data-v-7a9d1a0f]{width:%?160?%;height:%?68?%;line-height:%?68?%;text-align:center;background:#f7f7f9;margin-bottom:%?40?%;color:#888}.active[data-v-7a9d1a0f]{background-color:#f1f7ff;color:#025add}.repBtn[data-v-7a9d1a0f]{width:%?680?%;height:%?78?%;line-height:%?78?%;background-color:#025add;color:#fff;font-size:%?33?%;text-align:center;border-radius:%?10?%;margin:%?5?% auto %?20?%}',""]),t.exports=i}}]);